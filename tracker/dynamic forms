from django import forms
from .models import Document

class DocumentUploadForm(forms.ModelForm):
    class Meta:
        model = Document
        fields = ['file']

    def __init__(self, *args, **kwargs):
        documents = kwargs.pop('documents', None)
        super().__init__(*args, **kwargs)
        if documents:
            # Dynamically create a file field for every document the student needs
            for doc in documents:
                self.fields[f'file_{doc.id}'] = forms.FileField(
                    label=f"Upload {doc.name}", 
                    required=False,
                    widget=forms.FileInput(attrs={'class': 'block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100'})
                )

